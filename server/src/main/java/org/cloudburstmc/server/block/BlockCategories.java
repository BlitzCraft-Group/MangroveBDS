package org.cloudburstmc.server.block;

import it.unimi.dsi.fastutil.objects.ReferenceOpenHashSet;
import it.unimi.dsi.fastutil.objects.ReferenceSet;
import lombok.experimental.UtilityClass;
import org.cloudburstmc.server.utils.Identifier;

import java.util.Arrays;
import java.util.EnumMap;
import java.util.Set;

import static org.cloudburstmc.server.block.BlockTypes.*;

@UtilityClass
public class BlockCategories {

    private final EnumMap<BlockCategory, ReferenceSet<Identifier>> categoryMap = new EnumMap<>(BlockCategory.class);

    public void init() {
        for (BlockCategory category : BlockCategory.values()) {
            categoryMap.put(category, new ReferenceOpenHashSet<>());
        }
    }

    private void initDefaultCategories() {
        categorize(BlockCategory.SOLID,
                ACACIA_BUTTON,
                ACACIA_DOOR,
                ACACIA_FENCE_GATE,
                ACACIA_PRESSURE_PLATE,
                ACACIA_STAIRS,
                ACACIA_STANDING_SIGN,
                ACACIA_TRAPDOOR,
                ACACIA_WALL_SIGN,
                ALLOW,
                ANCIENT_DEBRIS,
                ANDESITE_STAIRS,
                ANVIL,
                BARREL,
                BARRIER,
                BASALT,
                BEACON,
                BED,
                BEDROCK,
                BEEHIVE,
                BEE_NEST,
                BELL,
                BIRCH_BUTTON,
                BIRCH_DOOR,
                BIRCH_FENCE_GATE,
                BIRCH_PRESSURE_PLATE,
                BIRCH_STAIRS,
                BIRCH_STANDING_SIGN,
                BIRCH_TRAPDOOR,
                BIRCH_WALL_SIGN,
                BLACKSTONE,
                BLACKSTONE_DOUBLE_SLAB,
                BLACKSTONE_SLAB,
                BLACKSTONE_STAIRS,
                BLACKSTONE_WALL,
                BLACK_GLAZED_TERRACOTTA,
                BLAST_FURNACE,
                BLUE_GLAZED_TERRACOTTA,
                BLUE_ICE,
                BONE_BLOCK,
                BOOKSHELF,
                BORDER_BLOCK,
                BREWING_STAND,
                BRICK_BLOCK,
                BRICK_STAIRS,
                BROWN_GLAZED_TERRACOTTA,
                BROWN_MUSHROOM_BLOCK,
                CACTUS,
                CAKE,
                CAMERA,
                CARTOGRAPHY_TABLE,
                CARVED_PUMPKIN,
                CAULDRON,
                CHAIN,
                CHAIN_COMMAND_BLOCK,
                CHEMICAL_HEAT,
                CHEMISTRY_TABLE,
                CHEST,
                CHISELED_NETHER_BRICKS,
                CHISELED_POLISHED_BLACKSTONE,
                CHORUS_FLOWER,
                CHORUS_PLANT,
                CLAY,
                COAL_BLOCK,
                COAL_ORE,
                COBBLESTONE,
                COBBLESTONE_WALL,
                COMMAND_BLOCK,
                COMPOSTER,
                CONCRETE,
                CONCRETE_POWDER,
                CORAL,
                CORAL_BLOCK,
                CORAL_FAN,
                CORAL_FAN_DEAD,
                CORAL_FAN_HANG,
                CORAL_FAN_HANG2,
                CORAL_FAN_HANG3,
                CRACKED_NETHER_BRICKS,
                CRACKED_POLISHED_BLACKSTONE_BRICKS,
                CRAFTING_TABLE,
                CRIMSON_BUTTON,
                CRIMSON_DOOR,
                CRIMSON_DOUBLE_SLAB,
                CRIMSON_FENCE,
                CRIMSON_FENCE_GATE,
                CRIMSON_HYPHAE,
                CRIMSON_NYLIUM,
                CRIMSON_PLANKS,
                CRIMSON_PRESSURE_PLATE,
                CRIMSON_SLAB,
                CRIMSON_STAIRS,
                CRIMSON_STANDING_SIGN,
                CRIMSON_STEM,
                CRIMSON_TRAPDOOR,
                CRIMSON_WALL_SIGN,
                CRYING_OBSIDIAN,
                CYAN_GLAZED_TERRACOTTA,
                DARK_OAK_STANDING_SIGN,
                DARK_OAK_WALL_SIGN,
                DARK_OAK_BUTTON,
                DARK_OAK_DOOR,
                DARK_OAK_FENCE_GATE,
                DARK_OAK_PRESSURE_PLATE,
                DARK_OAK_STAIRS,
                DARK_OAK_TRAPDOOR,
                DARK_PRISMARINE_STAIRS,
                DAYLIGHT_DETECTOR,
                DAYLIGHT_DETECTOR_INVERTED,
                DENY,
                DIAMOND_BLOCK,
                DIAMOND_ORE,
                DIORITE_STAIRS,
                DIRT,
                DISPENSER,
                DOUBLE_STONE_SLAB,
                DOUBLE_STONE_SLAB2,
                DOUBLE_STONE_SLAB3,
                DOUBLE_STONE_SLAB4,
                DOUBLE_WOODEN_SLAB,
                DRAGON_EGG,
                DRIED_KELP_BLOCK,
                DROPPER,
                ELEMENT_0,
                ELEMENT_1,
                ELEMENT_10,
                ELEMENT_100,
                ELEMENT_101,
                ELEMENT_102,
                ELEMENT_103,
                ELEMENT_104,
                ELEMENT_105,
                ELEMENT_106,
                ELEMENT_107,
                ELEMENT_108,
                ELEMENT_109,
                ELEMENT_11,
                ELEMENT_110,
                ELEMENT_111,
                ELEMENT_112,
                ELEMENT_113,
                ELEMENT_114,
                ELEMENT_115,
                ELEMENT_116,
                ELEMENT_117,
                ELEMENT_118,
                ELEMENT_12,
                ELEMENT_13,
                ELEMENT_14,
                ELEMENT_15,
                ELEMENT_16,
                ELEMENT_17,
                ELEMENT_18,
                ELEMENT_19,
                ELEMENT_2,
                ELEMENT_20,
                ELEMENT_21,
                ELEMENT_22,
                ELEMENT_23,
                ELEMENT_24,
                ELEMENT_25,
                ELEMENT_26,
                ELEMENT_27,
                ELEMENT_28,
                ELEMENT_29,
                ELEMENT_3,
                ELEMENT_30,
                ELEMENT_31,
                ELEMENT_32,
                ELEMENT_33,
                ELEMENT_34,
                ELEMENT_35,
                ELEMENT_36,
                ELEMENT_37,
                ELEMENT_38,
                ELEMENT_39,
                ELEMENT_4,
                ELEMENT_40,
                ELEMENT_41,
                ELEMENT_42,
                ELEMENT_43,
                ELEMENT_44,
                ELEMENT_45,
                ELEMENT_46,
                ELEMENT_47,
                ELEMENT_48,
                ELEMENT_49,
                ELEMENT_5,
                ELEMENT_50,
                ELEMENT_51,
                ELEMENT_52,
                ELEMENT_53,
                ELEMENT_54,
                ELEMENT_55,
                ELEMENT_56,
                ELEMENT_57,
                ELEMENT_58,
                ELEMENT_59,
                ELEMENT_6,
                ELEMENT_60,
                ELEMENT_61,
                ELEMENT_62,
                ELEMENT_63,
                ELEMENT_64,
                ELEMENT_65,
                ELEMENT_66,
                ELEMENT_67,
                ELEMENT_68,
                ELEMENT_69,
                ELEMENT_7,
                ELEMENT_70,
                ELEMENT_71,
                ELEMENT_72,
                ELEMENT_73,
                ELEMENT_74,
                ELEMENT_75,
                ELEMENT_76,
                ELEMENT_77,
                ELEMENT_78,
                ELEMENT_79,
                ELEMENT_8,
                ELEMENT_80,
                ELEMENT_81,
                ELEMENT_82,
                ELEMENT_83,
                ELEMENT_84,
                ELEMENT_85,
                ELEMENT_86,
                ELEMENT_87,
                ELEMENT_88,
                ELEMENT_89,
                ELEMENT_9,
                ELEMENT_90,
                ELEMENT_91,
                ELEMENT_92,
                ELEMENT_93,
                ELEMENT_94,
                ELEMENT_95,
                ELEMENT_96,
                ELEMENT_97,
                ELEMENT_98,
                ELEMENT_99,
                EMERALD_BLOCK,
                EMERALD_ORE,
                ENCHANTING_TABLE,
                ENDER_CHEST,
                END_BRICKS,
                END_BRICK_STAIRS,
                END_PORTAL_FRAME,
                END_STONE,
                FARMLAND,
                FENCE,
                FENCE_GATE,
                FLETCHING_TABLE,
                FROSTED_ICE,
                FURNACE,
                GILDED_BLACKSTONE,
                GLASS,
                GLASS_PANE,
                GLOWING_OBSIDIAN,
                GLOWSTONE,
                GOLD_BLOCK,
                GOLD_ORE,
                GRANITE_STAIRS,
                GRASS,
                GRASS_PATH,
                GRAVEL,
                GRAY_GLAZED_TERRACOTTA,
                GREEN_GLAZED_TERRACOTTA,
                GRINDSTONE,
                HARDENED_CLAY,
                HARD_GLASS,
                HARD_GLASS_PANE,
                HARD_STAINED_GLASS,
                HARD_STAINED_GLASS_PANE,
                HAY_BLOCK,
                HEAVY_WEIGHTED_PRESSURE_PLATE,
                HONEYCOMB_BLOCK,
                HONEY_BLOCK,
                HOPPER,
                ICE,
                INFO_UPDATE,
                INFO_UPDATE2,
                INVISIBLE_BEDROCK,
                IRON_BARS,
                IRON_BLOCK,
                IRON_DOOR,
                IRON_ORE,
                IRON_TRAPDOOR,
                JIGSAW,
                JUKEBOX,
                JUNGLE_BUTTON,
                JUNGLE_DOOR,
                JUNGLE_FENCE_GATE,
                JUNGLE_PRESSURE_PLATE,
                JUNGLE_STAIRS,
                JUNGLE_STANDING_SIGN,
                JUNGLE_TRAPDOOR,
                JUNGLE_WALL_SIGN,
                LANTERN,
                LAPIS_BLOCK,
                LAPIS_ORE,
                LAVA_CAULDRON,
                LEAVES,
                LEAVES2,
                LECTERN,
                LIGHT_BLUE_GLAZED_TERRACOTTA,
                LIGHT_WEIGHTED_PRESSURE_PLATE,
                LIME_GLAZED_TERRACOTTA,
                LIT_BLAST_FURNACE,
                LIT_FURNACE,
                LIT_PUMPKIN,
                LIT_REDSTONE_LAMP,
                LIT_REDSTONE_ORE,
                LIT_SMOKER,
                LODESTONE,
                LOG,
                LOG2,
                LOOM,
                MAGENTA_GLAZED_TERRACOTTA,
                MAGMA,
                MELON_BLOCK,
                MOB_SPAWNER,
                MONSTER_EGG,
                MOSSY_COBBLESTONE,
                MOSSY_COBBLESTONE_STAIRS,
                MOSSY_STONE_BRICK_STAIRS,
                MOVING_BLOCK,
                MYCELIUM,
                NETHERITE_BLOCK,
                NETHERRACK,
                NETHER_REACTOR,
                NETHER_BRICK,
                NETHER_BRICK_FENCE,
                NETHER_BRICK_STAIRS,
                NETHER_GOLD_ORE,
                NETHER_WART_BLOCK,
                NORMAL_STONE_STAIRS,
                NOTEBLOCK,
                OAK_STAIRS,
                OBSERVER,
                OBSIDIAN,
                ORANGE_GLAZED_TERRACOTTA,
                PACKED_ICE,
                PINK_GLAZED_TERRACOTTA,
                PISTON,
                PISTON_ARM_COLLISION,
                PLANKS,
                PODZOL,
                POLISHED_ANDESITE_STAIRS,
                POLISHED_BASALT,
                POLISHED_BLACKSTONE,
                POLISHED_BLACKSTONE_BRICKS,
                POLISHED_BLACKSTONE_BRICK_DOUBLE_SLAB,
                POLISHED_BLACKSTONE_BRICK_SLAB,
                POLISHED_BLACKSTONE_BRICK_STAIRS,
                POLISHED_BLACKSTONE_BRICK_WALL,
                POLISHED_BLACKSTONE_BUTTON,
                POLISHED_BLACKSTONE_DOUBLE_SLAB,
                POLISHED_BLACKSTONE_PRESSURE_PLATE,
                POLISHED_BLACKSTONE_SLAB,
                POLISHED_BLACKSTONE_STAIRS,
                POLISHED_BLACKSTONE_WALL,
                POLISHED_DIORITE_STAIRS,
                POLISHED_GRANITE_STAIRS,
                PRISMARINE,
                PRISMARINE_BRICKS_STAIRS,
                PRISMARINE_STAIRS,
                PUMPKIN,
                PURPLE_GLAZED_TERRACOTTA,
                PURPUR_BLOCK,
                PURPUR_STAIRS,
                QUARTZ_BLOCK,
                QUARTZ_BRICKS,
                QUARTZ_ORE,
                QUARTZ_STAIRS,
                REDSTONE_BLOCK,
                REDSTONE_LAMP,
                REDSTONE_ORE,
                RED_GLAZED_TERRACOTTA,
                RED_MUSHROOM_BLOCK,
                RED_NETHER_BRICK,
                RED_NETHER_BRICK_STAIRS,
                RED_SANDSTONE,
                RED_SANDSTONE_STAIRS,
                REPEATING_COMMAND_BLOCK,
                RESERVED6,
                RESPAWN_ANCHOR,
                SAND,
                SANDSTONE,
                SANDSTONE_STAIRS,
                SEA_LANTERN,
                SHROOMLIGHT,
                SHULKER_BOX,
                SILVER_GLAZED_TERRACOTTA,
                SLIME,
                SMITHING_TABLE,
                SMOKER,
                SMOOTH_QUARTZ_STAIRS,
                SMOOTH_RED_SANDSTONE_STAIRS,
                SMOOTH_SANDSTONE_STAIRS,
                SMOOTH_STONE,
                SNOW,
                SOUL_LANTERN,
                SOUL_SAND,
                SOUL_SOIL,
                SPONGE,
                SPRUCE_BUTTON,
                SPRUCE_DOOR,
                SPRUCE_FENCE_GATE,
                SPRUCE_PRESSURE_PLATE,
                SPRUCE_STAIRS,
                SPRUCE_STANDING_SIGN,
                SPRUCE_TRAPDOOR,
                SPRUCE_WALL_SIGN,
                STAINED_GLASS,
                STAINED_GLASS_PANE,
                STAINED_HARDENED_CLAY,
                STANDING_BANNER,
                STANDING_SIGN,
                STICKY_PISTON_ARM_COLLISION,
                STICKY_PISTON,
                STONE,
                STONEBRICK,
                STONECUTTER,
                STONECUTTER_BLOCK,
                STONE_BRICK_STAIRS,
                STONE_BUTTON,
                STONE_PRESSURE_PLATE,
                STONE_SLAB,
                STONE_SLAB2,
                STONE_SLAB3,
                STONE_SLAB4,
                STONE_STAIRS,
                STRIPPED_ACACIA_LOG,
                STRIPPED_BIRCH_LOG,
                STRIPPED_CRIMSON_HYPHAE,
                STRIPPED_CRIMSON_STEM,
                STRIPPED_DARK_OAK_LOG,
                STRIPPED_JUNGLE_LOG,
                STRIPPED_OAK_LOG,
                STRIPPED_SPRUCE_LOG,
                STRIPPED_WARPED_HYPHAE,
                STRIPPED_WARPED_STEM,
                STRUCTURE_BLOCK,
                STRUCTURE_VOID,
                TARGET,
                TNT,
                TRAPDOOR,
                TRAPPED_CHEST,
                TURTLE_EGG,
                UNDYED_SHULKER_BOX,
                WALL_BANNER,
                WALL_SIGN,
                WARPED_BUTTON,
                WARPED_DOOR,
                WARPED_DOUBLE_SLAB,
                WARPED_FENCE,
                WARPED_FENCE_GATE,
                WARPED_HYPHAE,
                WARPED_NYLIUM,
                WARPED_PLANKS,
                WARPED_PRESSURE_PLATE,
                WARPED_SLAB,
                WARPED_STAIRS,
                WARPED_STANDING_SIGN,
                WARPED_STEM,
                WARPED_TRAPDOOR,
                WARPED_WALL_SIGN,
                WARPED_WART_BLOCK,
                WHITE_GLAZED_TERRACOTTA,
                WOOD,
                WOODEN_BUTTON,
                WOODEN_DOOR,
                WOODEN_PRESSURE_PLATE,
                WOODEN_SLAB,
                WOOL,
                YELLOW_GLAZED_TERRACOTTA
        );

        categorize(BlockCategory.STAIRS,
                OAK_STAIRS,
                ACACIA_STAIRS,
                ANDESITE_STAIRS,
                BIRCH_STAIRS,
                BLACKSTONE_STAIRS,
                BRICK_STAIRS,
                CRIMSON_STAIRS,
                DARK_OAK_STAIRS,
                DARK_PRISMARINE_STAIRS,
                DIORITE_STAIRS,
                END_BRICK_STAIRS,
                GRANITE_STAIRS,
                JUNGLE_STAIRS,
                MOSSY_COBBLESTONE_STAIRS,
                MOSSY_STONE_BRICK_STAIRS,
                NETHER_BRICK_STAIRS,
                NORMAL_STONE_STAIRS,
                OAK_STAIRS,
                POLISHED_ANDESITE_STAIRS,
                POLISHED_BLACKSTONE_BRICK_STAIRS,
                POLISHED_BLACKSTONE_STAIRS,
                POLISHED_DIORITE_STAIRS,
                POLISHED_GRANITE_STAIRS,
                PRISMARINE_BRICKS_STAIRS,
                PRISMARINE_STAIRS,
                PURPUR_STAIRS,
                QUARTZ_STAIRS,
                RED_NETHER_BRICK_STAIRS,
                RED_SANDSTONE_STAIRS,
                SANDSTONE_STAIRS,
                SMOOTH_QUARTZ_STAIRS,
                SMOOTH_RED_SANDSTONE_STAIRS,
                SMOOTH_SANDSTONE_STAIRS,
                SPRUCE_STAIRS,
                STONE_BRICK_STAIRS,
                STONE_STAIRS,
                WARPED_STAIRS
        );
        categorize(BlockCategory.SLAB,
                BLACKSTONE_SLAB,
                CRIMSON_SLAB,
                POLISHED_BLACKSTONE_BRICK_SLAB,
                POLISHED_BLACKSTONE_SLAB,
                STONE_SLAB,
                STONE_SLAB2,
                STONE_SLAB3,
                STONE_SLAB4,
                WARPED_SLAB,
                WOODEN_SLAB
        );

        categorize(BlockCategory.DOUBLE_SLAB,
                BLACKSTONE_DOUBLE_SLAB,
                CRIMSON_DOUBLE_SLAB,
                POLISHED_BLACKSTONE_BRICK_DOUBLE_SLAB,
                POLISHED_BLACKSTONE_DOUBLE_SLAB,
                DOUBLE_STONE_SLAB,
                DOUBLE_STONE_SLAB2,
                DOUBLE_STONE_SLAB3,
                DOUBLE_STONE_SLAB4,
                WARPED_DOUBLE_SLAB,
                DOUBLE_WOODEN_SLAB
        );

        categorize(BlockCategory.DOOR,
                ACACIA_DOOR,
                BIRCH_DOOR,
                CRIMSON_DOOR,
                DARK_OAK_DOOR,
                IRON_DOOR,
                JUNGLE_DOOR,
                SPRUCE_DOOR,
                WARPED_DOOR,
                WOODEN_DOOR
        );

        categorize(BlockCategory.TRAPDOOR,
                ACACIA_TRAPDOOR,
                BIRCH_TRAPDOOR,
                CRIMSON_TRAPDOOR,
                DARK_OAK_TRAPDOOR,
                IRON_TRAPDOOR,
                JUNGLE_TRAPDOOR,
                SPRUCE_TRAPDOOR,
                WARPED_TRAPDOOR,
                TRAPDOOR
        );

        categorize(BlockCategory.LIQUID,
                WATER,
                FLOWING_WATER,
                LAVA,
                FLOWING_LAVA
        );

        categorize(BlockCategory.CROPS,
                WHEAT,
                BEETROOT,
                CARROTS,
                POTATOES,
                MELON_STEM,
                PUMPKIN_STEM,
                BAMBOO,
                COCOA,
                REEDS,
                SWEET_BERRY_BUSH,
                CACTUS,
                BROWN_MUSHROOM,
                RED_MUSHROOM,
                KELP,
                SEA_PICKLE,
                NETHER_WART,
                CHORUS_PLANT
        );
    }

    public void categorize(BlockCategory category, Set<Identifier> types) {
        categoryMap.get(category).addAll(types);
    }

    public void categorize(BlockCategory category, Identifier... types) {
        categoryMap.get(category).addAll(Arrays.asList(types));
    }

    public boolean inCategory(Identifier type, BlockCategory category) {
        return categoryMap.get(category).contains(type);
    }

    public boolean inCategories(Identifier type, BlockCategory... categories) {
        for (BlockCategory category : categories) {
            if (!inCategory(type, category)) {
                return false;
            }
        }

        return true;
    }
}
